

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strategies &mdash; QuantLab Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e9ebdb8f"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="utils.html" />
    <link rel="prev" title="Core Module" href="core.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            QuantLab
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core.html">Core Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Strategies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#trend-following">Trend Following</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.tema_lsma_crossover">TEMA-LSMA Crossover</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tema-lsma-crossover-strategy">TEMA-LSMA Crossover Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover"><code class="docutils literal notranslate"><span class="pre">TemaLsmaCrossover</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.dual_tema_lsma">Dual TEMA-LSMA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dual-trend-lines-with-trailing-stop-strategy-dtls">Dual Trend Lines with Trailing Stop Strategy (DTLS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy"><code class="docutils literal notranslate"><span class="pre">DualTemaLsmaStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.triple_ema_aligned">Triple EMA Aligned</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#triple-ema-aligned-strategy">Triple EMA Aligned Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy"><code class="docutils literal notranslate"><span class="pre">TripleEMAAlignedStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.ema_crossover">EMA Crossover</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ema-crossover-strategy-with-pyramiding-on-rsi-dips">EMA Crossover Strategy with Pyramiding on RSI Dips</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.ema_crossover.EMAcrossoverStrategy"><code class="docutils literal notranslate"><span class="pre">EMAcrossoverStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supertrend-strategies">Supertrend Strategies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mean-reversion">Mean Reversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.bollinger_rsi">Bollinger RSI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bollinger-band-with-rsi-strategy">Bollinger Band with RSI Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.bollinger_rsi.BollingerRSIStrategy"><code class="docutils literal notranslate"><span class="pre">BollingerRSIStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.weekly_green_bb">Weekly Green BB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#weekly-green-candle-mean-reversion-strategy">Weekly Green Candle Mean Reversion Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy"><code class="docutils literal notranslate"><span class="pre">WeeklyGreenBBStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.weekly_rotation">Weekly Rotation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_rotation.WeeklyRotationStrategy"><code class="docutils literal notranslate"><span class="pre">WeeklyRotationStrategy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_rotation.WeeklyMomentumStrategy"><code class="docutils literal notranslate"><span class="pre">WeeklyMomentumStrategy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_rotation.WeeklyMeanReversionStrategy"><code class="docutils literal notranslate"><span class="pre">WeeklyMeanReversionStrategy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_rotation.compute_weekly_returns"><code class="docutils literal notranslate"><span class="pre">compute_weekly_returns()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.weekly_rotation.compute_ranking_cache"><code class="docutils literal notranslate"><span class="pre">compute_ranking_cache()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pattern-recognition">Pattern Recognition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.candlestick_patterns">Candlestick Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#candlestick-patterns-strategy-the-whale">Candlestick Patterns Strategy (“The Whale”)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy"><code class="docutils literal notranslate"><span class="pre">CandlestickPatternsStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.ichimoku_cloud">Ichimoku Strategies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#strategies.ichimoku_cloud.IchimokuCloud"><code class="docutils literal notranslate"><span class="pre">IchimokuCloud</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#ichimoku-simple-wrapper-strategy">Ichimoku Simple (Wrapper) Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.ichimoku_simple.ichimoku_line"><code class="docutils literal notranslate"><span class="pre">ichimoku_line()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.ichimoku_simple.IchimokuSimple"><code class="docutils literal notranslate"><span class="pre">IchimokuSimple</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#momentum">Momentum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.stoch_rsi_pyramid_long">Stochastic RSI Pyramid</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy"><code class="docutils literal notranslate"><span class="pre">StochRSIPyramidLongStrategy</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.kama_crossover_filtered">KAMA Crossover</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kama-crossover-strategy-with-multi-factor-filters">KAMA Crossover Strategy with Multi-Factor Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered"><code class="docutils literal notranslate"><span class="pre">KAMACrossoverFiltered</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-strategies.knoxville">Knoxville Divergence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#knoxville-divergence-strategy-with-reversal-tabs">Knoxville Divergence Strategy with Reversal Tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.knoxville.detect_fractals"><code class="docutils literal notranslate"><span class="pre">detect_fractals()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#strategies.knoxville.KnoxvilleStrategy"><code class="docutils literal notranslate"><span class="pre">KnoxvilleStrategy</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="runners.html">Runners</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">QuantLab</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Strategies</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/strategies.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="strategies">
<h1>Strategies<a class="headerlink" href="#strategies" title="Link to this heading"></a></h1>
<p>QuantLab includes several built-in trading strategies for different market conditions.</p>
<p>All strategies inherit from <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.strategy.Strategy</span></code></a> and implement:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">prepare(df)</span></code>: Initialize indicators using <code class="docutils literal notranslate"><span class="pre">self.I()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">should_enter(i)</span></code>: Return True when entry conditions are met</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">should_exit(i)</span></code>: Return True when exit conditions are met</p></li>
</ul>
<section id="trend-following">
<h2>Trend Following<a class="headerlink" href="#trend-following" title="Link to this heading"></a></h2>
<section id="module-strategies.tema_lsma_crossover">
<span id="tema-lsma-crossover"></span><h3>TEMA-LSMA Crossover<a class="headerlink" href="#module-strategies.tema_lsma_crossover" title="Link to this heading"></a></h3>
<section id="tema-lsma-crossover-strategy">
<h4>TEMA-LSMA Crossover Strategy<a class="headerlink" href="#tema-lsma-crossover-strategy" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>Entry: TEMA(25) crosses above LSMA(100) when:</dt><dd><ul class="simple">
<li><p>ATR(14)% &gt; 3.5% (volatility filter)</p></li>
<li><p>ADX(28) &gt; 25 (trend strength filter)</p></li>
</ul>
</dd>
</dl>
<p>Exit: Bearish crossunder OR ATR-based stop loss</p>
<p>No lookahead bias - all indicators use current bar data only.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.tema_lsma_crossover.</span></span><span class="sig-name descname"><span class="pre">TemaLsmaCrossover</span></span><a class="reference internal" href="_modules/strategies/tema_lsma_crossover.html#TemaLsmaCrossover"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>TEMA-LSMA Crossover with ATR% and ADX filters.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.fast_length">
<span class="sig-name descname"><span class="pre">fast_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.fast_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.slow_length">
<span class="sig-name descname"><span class="pre">slow_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.slow_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.atr_14_min">
<span class="sig-name descname"><span class="pre">atr_14_min</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.5</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.atr_14_min" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.adx_28_min">
<span class="sig-name descname"><span class="pre">adx_28_min</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25.0</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.adx_28_min" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.use_atr_stop">
<span class="sig-name descname"><span class="pre">use_atr_stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.use_atr_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.atr_stop_multiplier">
<span class="sig-name descname"><span class="pre">atr_stop_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5.0</span></em><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.atr_stop_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/tema_lsma_crossover.html#TemaLsmaCrossover.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/tema_lsma_crossover.html#TemaLsmaCrossover.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate ATR-based stop loss at entry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.tema_lsma_crossover.TemaLsmaCrossover.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/tema_lsma_crossover.html#TemaLsmaCrossover.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.tema_lsma_crossover.TemaLsmaCrossover.on_bar" title="Link to this definition"></a></dt>
<dd><p>Trading logic.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.dual_tema_lsma">
<span id="dual-tema-lsma"></span><h3>Dual TEMA-LSMA<a class="headerlink" href="#module-strategies.dual_tema_lsma" title="Link to this heading"></a></h3>
<section id="dual-trend-lines-with-trailing-stop-strategy-dtls">
<h4>Dual Trend Lines with Trailing Stop Strategy (DTLS)<a class="headerlink" href="#dual-trend-lines-with-trailing-stop-strategy-dtls" title="Link to this heading"></a></h4>
<p>Advanced trend-following strategy combining TEMA (Triple Exponential Moving Average)
and LSMA (Least Squares Moving Average) for dynamic trend detection with ATR-based
trailing stop loss and multi-level take profit targets.</p>
<p>Entry: Crossover of fast trend line above slow trend line with trailing stop confirmation
Exit: Multiple take profit levels or bearish crossover with trailing stop activation</p>
<p>This is a professional implementation converted from PineScript v5, optimized for
institutional-grade backtesting with robust risk management.</p>
<p>Key Features:
- Dual trend lines (TEMA/LSMA combinations) for flexible trend detection
- Dynamic trailing stop loss based on ATR
- Multi-level take profit (TP1: 15%, TP2: 30%)
- Configurable pyramiding strategy
- Clean position sizing and equity management</p>
<p>Parameters:
- Trend Line 1: TEMA or LSMA (configurable)
- Trend Line 2: LSMA or TEMA (configurable)
- ATR Period: 8 (for stop loss calculation)
- ATR Multiplier: 3.5x (stop loss = ATR × multiplier)
- Take Profit 1: 15% (20% position exit)
- Take Profit 2: 30% (20% position exit)
- Stop Loss: 5% (fixed level)</p>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
<p>⚠️ OPTIMIZATION NOTES:
- Strategy performs best on 4H timeframe for BTC/USDT
- Adjust ATR period for different volatility regimes (5-15 typical range)
- Multiplier affects stop placement sensitivity (3.0-4.0 optimal)
- Works best in trending markets, avoid tight ranges</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.dual_tema_lsma.</span></span><span class="sig-name descname"><span class="pre">DualTemaLsmaStrategy</span></span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Dual Trend Lines with Trailing Stop Loss (DTLS) Strategy.</p>
<p>Combines TEMA and LSMA indicators for robust trend identification with
ATR-based trailing stops and multi-level profit taking for optimal
risk-adjusted returns.</p>
<p>Entry: Fast trend line crosses above slow trend line
Exit: Multiple take profit targets or bearish crossunder
Risk Management: ATR-based dynamic trailing stop + fixed 5% stop loss</p>
<p>Configuration allows choosing between TEMA and LSMA for each trend line,
enabling fine-tuned strategy behavior for different market conditions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type1">
<span class="sig-name descname"><span class="pre">trend_type1</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'TEMA'</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type1" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type1_length">
<span class="sig-name descname"><span class="pre">trend_type1_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type1_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type2">
<span class="sig-name descname"><span class="pre">trend_type2</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'LSMA'</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type2_length">
<span class="sig-name descname"><span class="pre">trend_type2_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.trend_type2_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp1_pct">
<span class="sig-name descname"><span class="pre">long_tp1_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.15</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp1_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp1_qty_pct">
<span class="sig-name descname"><span class="pre">long_tp1_qty_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.2</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp1_qty_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp2_pct">
<span class="sig-name descname"><span class="pre">long_tp2_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.3</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp2_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp2_qty_pct">
<span class="sig-name descname"><span class="pre">long_tp2_qty_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.2</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_tp2_qty_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_sl_pct">
<span class="sig-name descname"><span class="pre">long_sl_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.05</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.long_sl_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.atr_multiplier">
<span class="sig-name descname"><span class="pre">atr_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.5</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.atr_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.max_pyramid_levels">
<span class="sig-name descname"><span class="pre">max_pyramid_levels</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.max_pyramid_levels" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate take profit and stop loss levels when entering a trade.</p>
<p>Take Profit Levels:
- TP1: entry_price * (1 + 15%)
- TP2: entry_price * (1 + 30%)</p>
<p>Stop Loss:
- Fixed: entry_price * (1 - 5%)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry_time</strong> – Entry timestamp</p></li>
<li><p><strong>entry_price</strong> – Entry price</p></li>
<li><p><strong>state</strong> – Trading state dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with ‘limit’ (TP) and ‘stop’ (SL)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
<p>Uses PREVIOUS bar data only to prevent future leak.
Checks for NaN indicator values to avoid trading during insufficient data period.</p>
<p>Entry Logic:
- Trend line 1 crosses above trend line 2 (bullish signal)
- Trailing stop is above current price (confirming uptrend strength)
- No existing position</p>
<p>Exit Logic:
- Trend line 1 crosses below trend line 2 (bearish signal)
- Close price falls below trailing stop (stop loss hit)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timestamp</p></li>
<li><p><strong>row</strong> – Current bar data (high, low, close, open, volume, etc.)</p></li>
<li><p><strong>state</strong> – Trading state dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with entry/exit signals and reasons</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.dual_tema_lsma.DualTemaLsmaStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/dual_tema_lsma.html#DualTemaLsmaStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.dual_tema_lsma.DualTemaLsmaStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.triple_ema_aligned">
<span id="triple-ema-aligned"></span><h3>Triple EMA Aligned<a class="headerlink" href="#module-strategies.triple_ema_aligned" title="Link to this heading"></a></h3>
<section id="triple-ema-aligned-strategy">
<h4>Triple EMA Aligned Strategy<a class="headerlink" href="#triple-ema-aligned-strategy" title="Link to this heading"></a></h4>
<p>Trend alignment strategy using three exponential moving averages (20/50/200).
Detects strong directional moves by filtering for proper EMA stack alignment.</p>
<p>Buy Signal: Price &lt; EMA(20) &lt; EMA(50) &lt; EMA(200) (bullish stack)
Sell Signal: Price &gt; EMA(20) &gt; EMA(50) &gt; EMA(200) (bearish stack)</p>
<p>Core Logic:
- EMA(20): Fast trend detection (short-term)
- EMA(50): Medium trend confirmation (medium-term)
- EMA(200): Slow trend bias (long-term)</p>
<p>Entry Requirements:
- Price must be aligned below/above all three EMAs
- All EMAs must be in proper stacking order (no crossing)
- This filters for strong directional bias only</p>
<p>Parameters:
- EMA Fast: 20 period
- EMA Medium: 50 period
- EMA Slow: 200 period
- ATR: 14-period for stop loss calculation</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.triple_ema_aligned.</span></span><span class="sig-name descname"><span class="pre">TripleEMAAlignedStrategy</span></span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Triple EMA Aligned Strategy - Strong directional trend filter.</p>
<p>Enters only on strong EMA stack alignments where all three EMAs are
properly ordered relative to price, indicating confirmed trend direction.
Results in high win rate with low frequency but high-quality signals.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_fast_period">
<span class="sig-name descname"><span class="pre">ema_fast_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_fast_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_medium_period">
<span class="sig-name descname"><span class="pre">ema_medium_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_medium_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_slow_period">
<span class="sig-name descname"><span class="pre">ema_slow_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">200</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.ema_slow_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.atr_multiplier">
<span class="sig-name descname"><span class="pre">atr_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.atr_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate ATR-based stop loss when entering a trade.</p>
<p>Stop loss is DISABLED by default (use_stop_loss = False).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
<p>Entry: Price &lt; EMA(20) &lt; EMA(50) &lt; EMA(200) (bullish alignment)
Exit: Price &gt; EMA(20) &gt; EMA(50) &gt; EMA(200) (bearish alignment)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timestamp</p></li>
<li><p><strong>row</strong> – Current bar data</p></li>
<li><p><strong>state</strong> – Trading state</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with entry/exit signals and reasons</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.triple_ema_aligned.TripleEMAAlignedStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/triple_ema_aligned.html#TripleEMAAlignedStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.triple_ema_aligned.TripleEMAAlignedStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.ema_crossover">
<span id="ema-crossover"></span><h3>EMA Crossover<a class="headerlink" href="#module-strategies.ema_crossover" title="Link to this heading"></a></h3>
<section id="ema-crossover-strategy-with-pyramiding-on-rsi-dips">
<h4>EMA Crossover Strategy with Pyramiding on RSI Dips<a class="headerlink" href="#ema-crossover-strategy-with-pyramiding-on-rsi-dips" title="Link to this heading"></a></h4>
<p>A trend-following strategy that:
1. Enters on EMA 89/144 crossovers
2. Pyramids into positions when RSI &lt; 40 (buying dips)
3. Exits on crossunder signals</p>
<p>Reference: EMA Cross Strategy (kirilov)
Adapted for QuantLab backtesting engine.</p>
<p>Key Features:
- Entry: EMA(89) crosses above EMA(144) for LONG
- Pyramiding: Add to position when RSI &lt; 30 (strong oversold, up to 3 entries max)
- Exit: EMA(89) crosses below EMA(144)
- SL: ATR-based stop loss</p>
<p>Parameters:
- EMA Fast: 89 period
- EMA Slow: 144 period
- RSI Period: 14
- RSI Threshold: 30 (for dip entries - more selective than 40)
- Max Pyramids: 3 levels
- ATR: 14-period, 2x multiplier for stop loss</p>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.ema_crossover.</span></span><span class="sig-name descname"><span class="pre">EMAcrossoverStrategy</span></span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>EMA Crossover Strategy with RSI-based pyramiding.</p>
<p>Combines trend-following (EMA crossover) with mean reversion (RSI pyramiding).</p>
<p>NOTE ON INDICATORS:
- Indicators return NaN for insufficient data period
- EMA(144) returns NaN for bars 0-143
- Strategy checks for NaN before trading to avoid premature signals</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.ema_fast_period">
<span class="sig-name descname"><span class="pre">ema_fast_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">89</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.ema_fast_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.ema_slow_period">
<span class="sig-name descname"><span class="pre">ema_slow_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">144</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.ema_slow_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.rsi_period">
<span class="sig-name descname"><span class="pre">rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.rsi_pyramid_threshold">
<span class="sig-name descname"><span class="pre">rsi_pyramid_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.rsi_pyramid_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.max_pyramid_levels">
<span class="sig-name descname"><span class="pre">max_pyramid_levels</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.max_pyramid_levels" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.atr_multiplier">
<span class="sig-name descname"><span class="pre">atr_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.0</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.atr_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate ATR-based stop loss when entering a trade.</p>
<p>Stop loss is DISABLED by default (use_stop_loss = False).
Can be enabled by setting use_stop_loss = True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
<p>Uses PREVIOUS bar data only to prevent future leak.
Checks for NaN indicator values to avoid trading during insufficient data period.</p>
<p>Entry: EMA(89) crosses above EMA(144) OR RSI &lt; 30 (pyramiding)
Exit: EMA(89) crosses below EMA(144)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timestamp</p></li>
<li><p><strong>row</strong> – Current bar data</p></li>
<li><p><strong>state</strong> – Trading state</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with entry/exit signals and reasons</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ema_crossover.EMAcrossoverStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ema_crossover.html#EMAcrossoverStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ema_crossover.EMAcrossoverStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
<section id="supertrend-strategies">
<h3>Supertrend Strategies<a class="headerlink" href="#supertrend-strategies" title="Link to this heading"></a></h3>
</section>
</section>
<section id="mean-reversion">
<h2>Mean Reversion<a class="headerlink" href="#mean-reversion" title="Link to this heading"></a></h2>
<section id="module-strategies.bollinger_rsi">
<span id="bollinger-rsi"></span><h3>Bollinger RSI<a class="headerlink" href="#module-strategies.bollinger_rsi" title="Link to this heading"></a></h3>
<section id="bollinger-band-with-rsi-strategy">
<h4>Bollinger Band with RSI Strategy<a class="headerlink" href="#bollinger-band-with-rsi-strategy" title="Link to this heading"></a></h4>
<p>Mean reversion strategy combining:
1. Bollinger Bands for volatility-based entry/exit
2. RSI for overbought/oversold confirmation (Wilder’s smoothing - matches TradingView)</p>
<p>Entry: RSI &lt; 30 (oversold) AND price &lt; lower Bollinger Band
Exit: RSI &gt; 70 (overbought) OR Fixed 25% stop loss (checked every bar)</p>
<p>Parameters:
- RSI Period: 14 (uses Wilder’s smoothing with alpha=1/n)
- RSI Oversold Threshold: 30
- RSI Overbought Threshold: 70
- Bollinger Band Length: 20
- Bollinger Band Multiplier: 2.0
- Max Pyramiding: 3 levels on continued oversold signals
- Take Profit: 10%
- Stop Loss: 25% (fixed, checked every bar)</p>
<p>⚠️ IMPORTANT NOTE:
This strategy is optimized for INTRADAY TRADING on 125m and 75m timeframes.
Performance on daily (1d) data may be suboptimal. For best results:
- Use 125m interval for swing trading (2-8 hour holds)
- Use 75m interval for active intraday trading (1-4 hour holds)
- Daily (1d) interval is not recommended for this mean reversion strategy</p>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.bollinger_rsi.</span></span><span class="sig-name descname"><span class="pre">BollingerRSIStrategy</span></span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Bollinger Band with RSI mean reversion strategy.</p>
<p>Entry: RSI &lt; 30 (oversold) AND price &lt; lower BB
Exit: RSI &gt; 70 (overbought)</p>
<p>Pyramiding: Up to 3 levels on continued oversold conditions
Risk Management: 10% TP, 25% SL</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.rsi_period">
<span class="sig-name descname"><span class="pre">rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.rsi_oversold">
<span class="sig-name descname"><span class="pre">rsi_oversold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.rsi_oversold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.rsi_overbought">
<span class="sig-name descname"><span class="pre">rsi_overbought</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.rsi_overbought" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.bb_length">
<span class="sig-name descname"><span class="pre">bb_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.bb_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.bb_mult">
<span class="sig-name descname"><span class="pre">bb_mult</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.bb_mult" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.long_tp_pct">
<span class="sig-name descname"><span class="pre">long_tp_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.1</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.long_tp_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.long_sl_pct">
<span class="sig-name descname"><span class="pre">long_sl_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.25</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.long_sl_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.pyramiding_max">
<span class="sig-name descname"><span class="pre">pyramiding_max</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.pyramiding_max" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate take profit and stop loss when entering a trade.</p>
<p>Take Profit: entry_price * (1 + long_tp_pct)
Stop Loss: entry_price * (1 - long_sl_pct)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry_time</strong> – Entry timestamp</p></li>
<li><p><strong>entry_price</strong> – Entry price</p></li>
<li><p><strong>state</strong> – Trading state dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with ‘limit’ (TP) and ‘stop’ (SL)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
<p>Uses PREVIOUS bar data only to prevent future leak.
Checks for NaN indicator values to avoid trading during insufficient data period.</p>
<p>Entry: RSI &lt; 30 AND Price &lt; Lower Bollinger Band
Exit: RSI &gt; 70</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timestamp</p></li>
<li><p><strong>row</strong> – Current bar data (high, low, close, open, volume, etc.)</p></li>
<li><p><strong>state</strong> – Trading state dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with entry/exit signals and reasons</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.bollinger_rsi.BollingerRSIStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/bollinger_rsi.html#BollingerRSIStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.bollinger_rsi.BollingerRSIStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.weekly_green_bb">
<span id="weekly-green-bb"></span><h3>Weekly Green BB<a class="headerlink" href="#module-strategies.weekly_green_bb" title="Link to this heading"></a></h3>
<section id="weekly-green-candle-mean-reversion-strategy">
<h4>Weekly Green Candle Mean Reversion Strategy<a class="headerlink" href="#weekly-green-candle-mean-reversion-strategy" title="Link to this heading"></a></h4>
<p>A mean reversion strategy that identifies oversold weekly candles
opening below Bollinger Band 2.0 SD and exits when price returns to EMA 20.</p>
<p>Entry Conditions (checked on completed weekly bar):
1. Weekly candle is GREEN (close &gt; open)
2. Weekly OPEN is below BB lower band (SMA 20 ± 2.0 SD)
3. Weekly body size &gt; previous week’s body size
4. Weekly RSI(14) &lt; 60 on signal week</p>
<p>Entry Execution:
- Enter at OPEN of first trading day after signal week (Monday)</p>
<p>Exit Conditions:
- TP: Daily HIGH touches Weekly SMA 20 (BB center line)
- SL: 30% fixed stop loss from entry price</p>
<p>Parameters:
- BB Period: 20 (weekly SMA as center line + TP target)
- BB SD: 2.0 (sample std to match TradingView)
- RSI Period: 14 (weekly), max 60
- Stop Loss: 30%</p>
<p>IMPORTANT:
- This strategy internally resamples daily data to weekly
- Best run on DAILY (1d) timeframe data
- Entry happens on next bar after weekly signal</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.weekly_green_bb.</span></span><span class="sig-name descname"><span class="pre">WeeklyGreenBBStrategy</span></span><a class="reference internal" href="_modules/strategies/weekly_green_bb.html#WeeklyGreenBBStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Weekly Green Candle Mean Reversion Strategy.</p>
<p>Identifies oversold weekly candles below BB 2.0 SD,
enters on Monday open, exits at EMA 20 touch or 30% SL.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.bb_period">
<span class="sig-name descname"><span class="pre">bb_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.bb_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.bb_sd">
<span class="sig-name descname"><span class="pre">bb_sd</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.bb_sd" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.sl_pct">
<span class="sig-name descname"><span class="pre">sl_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.3</span></em><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.sl_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.rsi_period">
<span class="sig-name descname"><span class="pre">rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.rsi_max">
<span class="sig-name descname"><span class="pre">rsi_max</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60</span></em><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.rsi_max" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_green_bb.html#WeeklyGreenBBStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and calculate weekly indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_green_bb.html#WeeklyGreenBBStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Set stop loss at entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_green_bb.WeeklyGreenBBStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_green_bb.html#WeeklyGreenBBStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_green_bb.WeeklyGreenBBStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Trading logic executed on each bar.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.weekly_rotation">
<span id="weekly-rotation"></span><h3>Weekly Rotation<a class="headerlink" href="#module-strategies.weekly_rotation" title="Link to this heading"></a></h3>
<p>Weekly Rotation Strategy - Cross-Sectional Mean Reversion</p>
<p>DEFAULT CONFIGURATION (Optimized):
- Mode: Mean Reversion (buy oversold stocks)
- Selection: Bottom 20% performers
- Drop Threshold: &gt;5% weekly drop required
- NIFTY Filter: Only enter when NIFTY was DOWN that week
- Stop Loss: 10% fixed stop
- Hold Period: 1 week (Monday to Monday)</p>
<p>BACKTEST RESULTS (2015-2025):
- 2,356 trades | +1.37% avg return | 58.7% win rate
- 10/11 positive years (only 2019 slightly negative)</p>
<p>Entry: Monday open (or first trading day of week)
Exit: Following Monday open (hold for 1 week)</p>
<p>The ranking is computed across ALL symbols in the basket, but the strategy
operates on individual symbols. It uses a pre-computed ranking cache that
must be populated before running the backtest.</p>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.weekly_rotation.</span></span><span class="sig-name descname"><span class="pre">WeeklyRotationStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Weekly rotation strategy base class.</p>
<p>Subclasses: WeeklyMomentumStrategy, WeeklyMeanReversionStrategy</p>
<p>This strategy requires a ranking cache to be populated externally,
which tells it which symbols to enter on which weeks.</p>
<p>Due to multiprocessing, the cache is saved to a file and loaded by each worker.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.mode">
<span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'mean_reversion'</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.mode" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.select_pct">
<span class="sig-name descname"><span class="pre">select_pct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20.0</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.select_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.min_drop_pct">
<span class="sig-name descname"><span class="pre">min_drop_pct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5.0</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.min_drop_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.require_nifty_down">
<span class="sig-name descname"><span class="pre">require_nifty_down</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.require_nifty_down" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.use_adx_filter">
<span class="sig-name descname"><span class="pre">use_adx_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.use_adx_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.adx_period">
<span class="sig-name descname"><span class="pre">adx_period</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.adx_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.adx_threshold">
<span class="sig-name descname"><span class="pre">adx_threshold</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25.0</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.adx_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.fixed_stop_pct">
<span class="sig-name descname"><span class="pre">fixed_stop_pct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.08</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.fixed_stop_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.use_trailing_stop">
<span class="sig-name descname"><span class="pre">use_trailing_stop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.use_trailing_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.trailing_stop_pct">
<span class="sig-name descname"><span class="pre">trailing_stop_pct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.02</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.trailing_stop_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize strategy with optional parameter overrides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.set_ranking_cache">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_ranking_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.set_ranking_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.set_ranking_cache" title="Link to this definition"></a></dt>
<dd><p>Set the pre-computed ranking cache and save to file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cache</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a></span>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.set_weekly_returns">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_weekly_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.set_weekly_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.set_weekly_returns" title="Link to this definition"></a></dt>
<dd><p>Set weekly returns data for all symbols.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>returns</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a></span>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.clear_cache">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clear_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.clear_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.clear_cache" title="Link to this definition"></a></dt>
<dd><p>Clear all cached data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Prepare indicators and identify entry weeks for this symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize indicators for filters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate initial stop loss on entry.
Called when a trade is executed.</p>
<p>Fixed stop = Entry price × (1 - 10%)
Trailing stop = Highest HIGH × (1 - 2%)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyRotationStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyRotationStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyRotationStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Generate entry/exit signals on each bar.</p>
<p>Entry: First trading day of week if this symbol is in the selected set
Exit: First trading day of next week (hold for ~1 week)</p>
<p>Handles trading holidays: if Monday is a holiday, entry/exit on Tuesday.</p>
<p>Stop Loss:
- Fixed Stop: 10% below entry price (set in on_entry)
- Trailing Stop: 2% below highest close (updated each bar)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMomentumStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.weekly_rotation.</span></span><span class="sig-name descname"><span class="pre">WeeklyMomentumStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyMomentumStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMomentumStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#strategies.weekly_rotation.WeeklyRotationStrategy" title="strategies.weekly_rotation.WeeklyRotationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeeklyRotationStrategy</span></code></a></p>
<p>Buy top N% performers (momentum).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMomentumStrategy.mode">
<span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'momentum'</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMomentumStrategy.mode" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMomentumStrategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyMomentumStrategy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMomentumStrategy.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize strategy with optional parameter overrides.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMeanReversionStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.weekly_rotation.</span></span><span class="sig-name descname"><span class="pre">WeeklyMeanReversionStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyMeanReversionStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMeanReversionStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#strategies.weekly_rotation.WeeklyRotationStrategy" title="strategies.weekly_rotation.WeeklyRotationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeeklyRotationStrategy</span></code></a></p>
<p>Buy bottom N% performers (mean reversion).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMeanReversionStrategy.mode">
<span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'mean_reversion'</span></em><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMeanReversionStrategy.mode" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.weekly_rotation.WeeklyMeanReversionStrategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#WeeklyMeanReversionStrategy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.WeeklyMeanReversionStrategy.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize strategy with optional parameter overrides.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strategies.weekly_rotation.compute_weekly_returns">
<span class="sig-prename descclassname"><span class="pre">strategies.weekly_rotation.</span></span><span class="sig-name descname"><span class="pre">compute_weekly_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">daily_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#compute_weekly_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.compute_weekly_returns" title="Link to this definition"></a></dt>
<dd><p>Compute weekly returns for all symbols.</p>
<p>Weekly return = (Friday close - Monday open) / Monday open
This measures the full trading week performance from Monday open to Friday close.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>daily_data</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>]</span>) – Dict of symbol -&gt; DataFrame with OHLC daily data</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>week_ending, week_start, pct_return</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict of symbol -&gt; DataFrame with columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strategies.weekly_rotation.compute_ranking_cache">
<span class="sig-prename descclassname"><span class="pre">strategies.weekly_rotation.</span></span><span class="sig-name descname"><span class="pre">compute_ranking_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weekly_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean_reversion'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_pct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_drop_pct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nifty_weekly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_nifty_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_nifty_up</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/weekly_rotation.html#compute_ranking_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.weekly_rotation.compute_ranking_cache" title="Link to this definition"></a></dt>
<dd><p>Pre-compute which symbols to enter on which weeks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weekly_returns</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>]</span>) – Dict from compute_weekly_returns()</p></li>
<li><p><strong>mode</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>) – “momentum” (top performers) or “mean_reversion” (bottom performers)</p></li>
<li><p><strong>select_pct</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Top/bottom N% to select</p></li>
<li><p><strong>min_drop_pct</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – Minimum drop % required (e.g., 5.0 = only stocks down &gt;5%)</p></li>
<li><p><strong>nifty_weekly</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>]</span>) – DataFrame with NIFTY weekly returns (week_ending, pct_return)</p></li>
<li><p><strong>require_nifty_down</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – If True, only enter when NIFTY was down that week</p></li>
<li><p><strong>require_nifty_up</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span>) – If True, only enter when NIFTY was up that week</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>{“rank”: float, “should_enter”: bool}}</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict of {(symbol, week_start)</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="pattern-recognition">
<h2>Pattern Recognition<a class="headerlink" href="#pattern-recognition" title="Link to this heading"></a></h2>
<section id="module-strategies.candlestick_patterns">
<span id="candlestick-patterns"></span><h3>Candlestick Patterns<a class="headerlink" href="#module-strategies.candlestick_patterns" title="Link to this heading"></a></h3>
<section id="candlestick-patterns-strategy-the-whale">
<h4>Candlestick Patterns Strategy (“The Whale”)<a class="headerlink" href="#candlestick-patterns-strategy-the-whale" title="Link to this heading"></a></h4>
<p><strong>Type</strong>: Pattern Recognition / Momentum</p>
<p><strong>Summary</strong>: Detects 20+ bullish candlestick patterns with multi-factor confluence filters.</p>
<section id="entry-conditions">
<h5>Entry Conditions:<a class="headerlink" href="#entry-conditions" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Any of 20+ bullish candlestick patterns detected:
- Hammer, Inverted Hammer, Bullish Engulfing, Piercing Line
- Morning Star, Three White Soldiers, Bullish Harami
- Dragonfly Doji, Tweezer Bottom, Rising Three Methods
- And more…</p></li>
<li><p>All enabled confluence filters must pass</p></li>
</ol>
</section>
<section id="confluence-filters-toggleable">
<h5>Confluence Filters (toggleable):<a class="headerlink" href="#confluence-filters-toggleable" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>ADX Filter: ADX(9) &gt; 20 (trend strength)</p></li>
<li><p>EMA Filter: EMA(50) &gt; EMA(200) (bullish alignment)</p></li>
<li><p>RSI Filter: RSI(21) in range 40-70 (momentum zone)</p></li>
<li><p>Volume Filter: Volume &gt; 5-bar average (participation)</p></li>
<li><p>VWAP Filter: Close &gt; VWAP (above average value)</p></li>
<li><p>MFI Filter: MFI(14) in range 20-80 (money flow)</p></li>
</ul>
</section>
<section id="exit-conditions">
<h5>Exit Conditions:<a class="headerlink" href="#exit-conditions" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Take profit at 10%</p></li>
<li><p>ATR-based stop loss (1.0 × ATR)</p></li>
<li><p>Trailing stop at 0.6% of entry price</p></li>
</ol>
</section>
<section id="parameters">
<h5>Parameters:<a class="headerlink" href="#parameters" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>small_body_pct (float): Max body size for doji/small patterns. Default: 0.30</p></li>
<li><p>long_body_pct (float): Min body size for strong patterns. Default: 0.60</p></li>
<li><p>doji_pct (float): Max body % of range for doji. Default: 5.0</p></li>
<li><p>atr_period (int): ATR period for stop loss. Default: 14</p></li>
<li><p>take_profit_pct (float): Take profit target. Default: 0.10 (10%)</p></li>
<li><p>stop_loss_atr_mult (float): ATR multiplier for stop. Default: 1.0</p></li>
<li><p>trailing_stop_pct (float): Trailing stop distance. Default: 0.006 (0.6%)</p></li>
</ul>
</section>
<section id="performance-notes">
<h5>Performance Notes:<a class="headerlink" href="#performance-notes" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>High frequency strategy with many pattern signals</p></li>
<li><p>Confluence filters significantly improve win rate</p></li>
<li><p>Works best on liquid, trending stocks</p></li>
<li><p>Baseline mode (all filters off) useful for pattern analysis</p></li>
</ul>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.candlestick_patterns.</span></span><span class="sig-name descname"><span class="pre">CandlestickPatternsStrategy</span></span><a class="reference internal" href="_modules/strategies/candlestick_patterns.html#CandlestickPatternsStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>The Whale - 20+ bullish candlestick patterns with confluence filters.</p>
<p>Entry: Candlestick pattern + all enabled confluence filters pass
Exit: 10% TP, ATR-based SL, or 0.6% trailing stop</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.small_body_pct">
<span class="sig-name descname"><span class="pre">small_body_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.3</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.small_body_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.long_body_pct">
<span class="sig-name descname"><span class="pre">long_body_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.6</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.long_body_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.doji_pct">
<span class="sig-name descname"><span class="pre">doji_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5.0</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.doji_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.take_profit_pct">
<span class="sig-name descname"><span class="pre">take_profit_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.1</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.take_profit_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.stop_loss_atr_mult">
<span class="sig-name descname"><span class="pre">stop_loss_atr_mult</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.stop_loss_atr_mult" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.trailing_stop_pct">
<span class="sig-name descname"><span class="pre">trailing_stop_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.006</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.trailing_stop_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_adx_filter">
<span class="sig-name descname"><span class="pre">use_adx_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_adx_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_ema_filter">
<span class="sig-name descname"><span class="pre">use_ema_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_ema_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_rsi_filter">
<span class="sig-name descname"><span class="pre">use_rsi_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_rsi_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_volume_filter">
<span class="sig-name descname"><span class="pre">use_volume_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_volume_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_vwap_filter">
<span class="sig-name descname"><span class="pre">use_vwap_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_vwap_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.use_mfi_filter">
<span class="sig-name descname"><span class="pre">use_mfi_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.use_mfi_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/candlestick_patterns.html#CandlestickPatternsStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/candlestick_patterns.html#CandlestickPatternsStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators for confluence filters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/candlestick_patterns.html#CandlestickPatternsStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate stop loss and take profit on entry.
Called when a trade is executed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.candlestick_patterns.CandlestickPatternsStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/candlestick_patterns.html#CandlestickPatternsStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.candlestick_patterns.CandlestickPatternsStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic each bar (daily).</p>
<p>Entry: Signal on current bar → Execute at NEXT bar’s open
Exit: Bearish pattern or take profit/stop loss</p>
<p>TSL (End-of-Day): Calculated at day’s close using highest close reached
- At each day’s close, update TSL = highest_close - (0.6% × entry_price)
- TSL can only move up (never down)
- Next day’s open will check if TSL was breached</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.ichimoku_cloud">
<span id="ichimoku-strategies"></span><h3>Ichimoku Strategies<a class="headerlink" href="#module-strategies.ichimoku_cloud" title="Link to this heading"></a></h3>
<p>QuantLab-compatible Ichimoku Tenkan-Kijun Crossover Strategy</p>
<p>Implements correct Ichimoku Cloud logic with:
- Proper Tenkan-sen (conversion) and Kijun-sen (baseline) as midpoints of high/low
- Senkou Span A/B with 26-bar forward shift
- Custom crossover detection handling flat segments
- Faster exits: Tenkan-Kijun bearish cross OR price below cloud
- Trailing stop loss anchored at cloud edge</p>
<p>Long-only strategy trading Tenkan-Kijun bullish crosses with optional cloud filters.</p>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.ichimoku_cloud.</span></span><span class="sig-name descname"><span class="pre">IchimokuCloud</span></span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Ichimoku cloud strategy focused on Tenkan-Kijun crossovers with cloud confirmation.</p>
<p>Core Signal:
- Entry: Bullish Tenkan-Kijun crossover (handling flat segments correctly)
- Exit: Bearish Tenkan-Kijun crossover OR price below cloud (whichever comes first)</p>
<p>Trend Context:
- Cloud must be BULLISH (Span A &gt; Span B) for long entry
- Price should ideally be above cloud (Kumo filter)</p>
<p>Optional Filters (all configurable):
1. Price above Kumo (cloud)
2. ATR % filter (volatility)
3. NIFTY50 &gt; EMA 50 (market regime)
4. Price &gt; EMA 200 (long-term trend)</p>
<p>Stop Loss:
- Trailing stop anchored at bottom of cloud (min of Span A and B)</p>
<p>Parameters configurable for optimization of lengths and filter toggles.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.tenkan_length">
<span class="sig-name descname"><span class="pre">tenkan_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.tenkan_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.kijun_length">
<span class="sig-name descname"><span class="pre">kijun_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">26</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.kijun_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.senkou_b_length">
<span class="sig-name descname"><span class="pre">senkou_b_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">52</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.senkou_b_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.chikou_shift">
<span class="sig-name descname"><span class="pre">chikou_shift</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">26</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.chikou_shift" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_price_above_kumo">
<span class="sig-name descname"><span class="pre">use_price_above_kumo</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_price_above_kumo" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_kumo_bullish_filter">
<span class="sig-name descname"><span class="pre">use_kumo_bullish_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_kumo_bullish_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_atr_filter">
<span class="sig-name descname"><span class="pre">use_atr_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_atr_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.atr_pct_threshold">
<span class="sig-name descname"><span class="pre">atr_pct_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.0</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.atr_pct_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_nifty50_ema_filter">
<span class="sig-name descname"><span class="pre">use_nifty50_ema_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_nifty50_ema_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_price_above_ema200">
<span class="sig-name descname"><span class="pre">use_price_above_ema200</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_price_above_ema200" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.ema200_period">
<span class="sig-name descname"><span class="pre">ema200_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">200</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.ema200_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.use_cloud_trailing_stop">
<span class="sig-name descname"><span class="pre">use_cloud_trailing_stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.use_cloud_trailing_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.atr_stop_multiplier">
<span class="sig-name descname"><span class="pre">atr_stop_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.atr_stop_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and call initialize.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate stop loss when entering a trade.</p>
<p>Default: Cloud-based trailing stop at the lower edge of the cloud.
Override: ATR-based stops if use_cloud_trailing_stop=False</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.on_bar" title="Link to this definition"></a></dt>
<dd><p>Main strategy logic on each bar.</p>
<p>Entry: Tenkan-Kijun bullish cross + filters + cloud bullish
Exit: Tenkan-Kijun bearish cross OR price below cloud (whichever comes first)</p>
<p>Optional filters: price above cloud, ATR, NIFTY50, EMA200</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_cloud.IchimokuCloud.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_cloud.html#IchimokuCloud.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_cloud.IchimokuCloud.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

<section id="ichimoku-simple-wrapper-strategy">
<span id="module-strategies.ichimoku_simple"></span><h4>Ichimoku Simple (Wrapper) Strategy<a class="headerlink" href="#ichimoku-simple-wrapper-strategy" title="Link to this heading"></a></h4>
<p><strong>Type</strong>: Trend Following</p>
<p><strong>Summary</strong>: Lean Ichimoku implementation using Strategy.I() wrapper for all indicators.</p>
<section id="id1">
<h5>Entry Conditions:<a class="headerlink" href="#id1" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Tenkan-Kijun bullish crossover (Tenkan crosses above Kijun)</p></li>
<li><p>Optional filters (all disabled by default):
- Trend Filter: Aroon classification Bull OR Sideways
- Volatility Filter: ATR% classification High OR Med
- DI Filter: +DI &gt; -DI (bullish directional movement)
- RSI Filter: RSI &gt; 60
- EMA Filter: Price &gt; EMA(20)
- MACD Filter: MACD bullish (disabled - too strict)</p></li>
</ol>
</section>
<section id="id2">
<h5>Exit Conditions:<a class="headerlink" href="#id2" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Bearish Tenkan-Kijun crossover (Tenkan crosses below Kijun)</p></li>
</ol>
</section>
<section id="ichimoku-components">
<h5>Ichimoku Components:<a class="headerlink" href="#ichimoku-components" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>Tenkan-sen (Conversion): 9-period midpoint (H+L)/2</p></li>
<li><p>Kijun-sen (Base): 26-period midpoint</p></li>
<li><p>Senkou Span A: (Tenkan + Kijun) / 2, shifted 26 bars forward</p></li>
<li><p>Senkou Span B: 52-period midpoint, shifted 26 bars forward</p></li>
</ul>
</section>
<section id="id3">
<h5>Parameters:<a class="headerlink" href="#id3" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>conversion_length (int): Tenkan-sen period. Default: 9</p></li>
<li><p>base_length (int): Kijun-sen period. Default: 26</p></li>
<li><p>lagging_length (int): Senkou Span B period. Default: 52</p></li>
<li><p>use_trend_filter (bool): Enable Aroon trend filter. Default: False</p></li>
<li><p>use_vol_filter (bool): Enable ATR% volatility filter. Default: False</p></li>
<li><p>use_di_filter (bool): Enable DI bullish filter. Default: False</p></li>
<li><p>use_rsi_filter (bool): Enable RSI &gt; 60 filter. Default: False</p></li>
</ul>
</section>
<section id="id4">
<h5>Performance Notes:<a class="headerlink" href="#id4" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>All filters disabled by default for baseline testing</p></li>
<li><p>Enable filters selectively for improved signal quality</p></li>
<li><p>Best on daily timeframe for swing trades</p></li>
<li><p>Requires 52+ bars of data before first signal</p></li>
</ul>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.ichimoku_line">
<span class="sig-prename descclassname"><span class="pre">strategies.ichimoku_simple.</span></span><span class="sig-name descname"><span class="pre">ichimoku_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">high</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#ichimoku_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.ichimoku_line" title="Link to this definition"></a></dt>
<dd><p>Calculate Ichimoku line (conversion, base, or leading span B).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>high</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a></span>)</p></li>
<li><p><strong>low</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a></span>)</p></li>
<li><p><strong>period</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.ichimoku_simple.</span></span><span class="sig-name descname"><span class="pre">IchimokuSimple</span></span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>SUPER LEAN Ichimoku wrapper using Strategy.I() for ALL indicators.
This follows the wrapper guide exactly - NO manual calculations!</p>
<p>NOTE ON INDICATORS:
- Indicators return NaN for insufficient data period
- Ichimoku leading span B requires 52-bar minimum
- Strategy checks for NaN before trading to avoid premature signals</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.conversion_length">
<span class="sig-name descname"><span class="pre">conversion_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.conversion_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.base_length">
<span class="sig-name descname"><span class="pre">base_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">26</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.base_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.lagging_length">
<span class="sig-name descname"><span class="pre">lagging_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">52</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.lagging_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_trend_filter">
<span class="sig-name descname"><span class="pre">use_trend_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_trend_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_vol_filter">
<span class="sig-name descname"><span class="pre">use_vol_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_vol_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_di_filter">
<span class="sig-name descname"><span class="pre">use_di_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_di_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_rsi_filter">
<span class="sig-name descname"><span class="pre">use_rsi_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_rsi_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.rsi_min">
<span class="sig-name descname"><span class="pre">rsi_min</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.rsi_min" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.rsi_period">
<span class="sig-name descname"><span class="pre">rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_macd_filter">
<span class="sig-name descname"><span class="pre">use_macd_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_macd_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_ema_filter">
<span class="sig-name descname"><span class="pre">use_ema_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_ema_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_ema50_filter">
<span class="sig-name descname"><span class="pre">use_ema50_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_ema50_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.aroon_period">
<span class="sig-name descname"><span class="pre">aroon_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.aroon_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.aroon_up_bull_threshold">
<span class="sig-name descname"><span class="pre">aroon_up_bull_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.aroon_up_bull_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.aroon_down_bull_threshold">
<span class="sig-name descname"><span class="pre">aroon_down_bull_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.aroon_down_bull_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.aroon_down_sideways_threshold">
<span class="sig-name descname"><span class="pre">aroon_down_sideways_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.aroon_down_sideways_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_high_threshold">
<span class="sig-name descname"><span class="pre">atr_high_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_high_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_cci_filter">
<span class="sig-name descname"><span class="pre">use_cci_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_cci_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.cci_min">
<span class="sig-name descname"><span class="pre">cci_min</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.cci_min" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.cci_period">
<span class="sig-name descname"><span class="pre">cci_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.cci_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_ema5_filter">
<span class="sig-name descname"><span class="pre">use_ema5_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_ema5_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_atr_filter">
<span class="sig-name descname"><span class="pre">use_atr_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_atr_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_min_pct">
<span class="sig-name descname"><span class="pre">atr_min_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_min_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_max_pct">
<span class="sig-name descname"><span class="pre">atr_max_pct</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_max_pct" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_vwma_filter">
<span class="sig-name descname"><span class="pre">use_vwma_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_vwma_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.vwma_period">
<span class="sig-name descname"><span class="pre">vwma_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.vwma_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_hma_filter">
<span class="sig-name descname"><span class="pre">use_hma_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_hma_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.hma_period">
<span class="sig-name descname"><span class="pre">hma_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.hma_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_bb_filter">
<span class="sig-name descname"><span class="pre">use_bb_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_bb_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.bb_period">
<span class="sig-name descname"><span class="pre">bb_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.bb_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.bb_std">
<span class="sig-name descname"><span class="pre">bb_std</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.bb_std" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_cmf_filter">
<span class="sig-name descname"><span class="pre">use_cmf_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_cmf_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.cmf_min">
<span class="sig-name descname"><span class="pre">cmf_min</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-0.15</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.cmf_min" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.cmf_period">
<span class="sig-name descname"><span class="pre">cmf_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.cmf_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_trailing_stop_mult">
<span class="sig-name descname"><span class="pre">atr_trailing_stop_mult</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.0</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_trailing_stop_mult" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.atr_trailing_stop_length">
<span class="sig-name descname"><span class="pre">atr_trailing_stop_length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.atr_trailing_stop_length" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and call initialize.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate ATR-based stop loss when entering a trade.</p>
<p>Stop loss is DISABLED by default (use_stop_loss = False).
Can be enabled by setting use_stop_loss = True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.on_bar" title="Link to this definition"></a></dt>
<dd><p>Strategy logic using declared indicators.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.ichimoku_simple.IchimokuSimple.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/ichimoku_simple.html#IchimokuSimple.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.ichimoku_simple.IchimokuSimple.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="momentum">
<h2>Momentum<a class="headerlink" href="#momentum" title="Link to this heading"></a></h2>
<section id="module-strategies.stoch_rsi_pyramid_long">
<span id="stochastic-rsi-pyramid"></span><h3>Stochastic RSI Pyramid<a class="headerlink" href="#module-strategies.stoch_rsi_pyramid_long" title="Link to this heading"></a></h3>
<p>Stochastic RSI OB/OS Long with Pyramiding Strategy (v5 EXACT Pine Script Replica)</p>
<p>Exact replica of TradingView Pine Script v6 “Stoch RSI OB/OS Long v5 (CORRECTED)”:
- Entry on Turn-In-Zone signals in Oversold (OS) region (K &lt;= 10)
- Pyramid up to 2 positions when K exits and re-enters OS zone (1 original + 1 re-entry)
- Exit on Turn-In-Zone signals in Overbought (OB) region (K &gt;= 70)
- ATR-based stop loss (2.0x ATR) - DISABLED by default</p>
<p>FILTERS:
1. ATR % &gt; 3 - Entry only when ATR% above threshold (volatility filter)
2. VIX &lt; 14 OR VIX &gt; 20 - Entry only in fear/greed zones, not neutral
3. ADX(28) &gt; 25 - Entry only when strong trend (directional movement)</p>
<p>All logic replicated exactly from Pine Script.</p>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.stoch_rsi_pyramid_long.</span></span><span class="sig-name descname"><span class="pre">StochRSIPyramidLongStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Stochastic RSI with Pyramiding Long-Only Strategy v5 EXACT</p>
<p>ENTRY: Turn-In-Zone signals in Oversold (OS) region
- Turn UP: (K &lt;= OS or K_prev &lt;= OS) and (K &gt; K_prev)
- One-bar dip recovery: K_prev &lt;= OS and K &gt; OS and K_prev &lt; K_prev2 and K_prev2 &gt; OS</p>
<p>PYRAMID: Up to 2 total entries (1 original + 1 re-entry)
- K must exit OS (go &gt; 10)
- Then re-enter OS (come back &lt;= 10)
- State: canPyramidAgain, entriesThisCycle, hasExitedOS</p>
<p>EXIT: Turn-In-Zone signals in Overbought (OB) region
- Turn DOWN: (K &gt;= OB or K_prev &gt;= OB) and (K &lt; K_prev)
- One-bar spike decline: K_prev &gt;= OB and K &lt; OB and K_prev &gt; K_prev2 and K_prev2 &lt; OB</p>
<p>FILTERS:
1. ATR % &gt; 3 - Entry only when ATR% above threshold (volatility)
2. VIX &lt; 14 OR VIX &gt; 20 - Entry only in fear/greed zones
3. ADX(28) &gt; 25 - Entry only when strong trend exists</p>
<p>STOP LOSS (DISABLED by default):
- 2 ATR below entry</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.rsi_len">
<span class="sig-name descname"><span class="pre">rsi_len</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.rsi_len" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.stoch_len">
<span class="sig-name descname"><span class="pre">stoch_len</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.stoch_len" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.smooth_len">
<span class="sig-name descname"><span class="pre">smooth_len</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.smooth_len" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.smooth_d_len">
<span class="sig-name descname"><span class="pre">smooth_d_len</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.smooth_d_len" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.ob_level">
<span class="sig-name descname"><span class="pre">ob_level</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.ob_level" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.os_level">
<span class="sig-name descname"><span class="pre">os_level</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.os_level" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_atr_stop">
<span class="sig-name descname"><span class="pre">use_atr_stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_atr_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_len_stop">
<span class="sig-name descname"><span class="pre">atr_len_stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_len_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_mult_stop">
<span class="sig-name descname"><span class="pre">atr_mult_stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_mult_stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_atr_filter">
<span class="sig-name descname"><span class="pre">use_atr_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_atr_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_pct_threshold">
<span class="sig-name descname"><span class="pre">atr_pct_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.atr_pct_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_vix_filter">
<span class="sig-name descname"><span class="pre">use_vix_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_vix_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.vix_low_threshold">
<span class="sig-name descname"><span class="pre">vix_low_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.vix_low_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.vix_high_threshold">
<span class="sig-name descname"><span class="pre">vix_high_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.vix_high_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_adx_filter">
<span class="sig-name descname"><span class="pre">use_adx_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.use_adx_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.adx_len">
<span class="sig-name descname"><span class="pre">adx_len</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">28</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.adx_len" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.adx_threshold">
<span class="sig-name descname"><span class="pre">adx_threshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25.0</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.adx_threshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.max_pyramid_entries">
<span class="sig-name descname"><span class="pre">max_pyramid_entries</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.max_pyramid_entries" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize strategy with optional parameter overrides.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Generate signals on each bar using exact Pine Script v6 logic.</p>
<p>EXACT REPLICA of Pine Script logic - follows sections 2-6 from the script.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/stoch_rsi_pyramid_long.html#StochRSIPyramidLongStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.stoch_rsi_pyramid_long.StochRSIPyramidLongStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.kama_crossover_filtered">
<span id="kama-crossover"></span><h3>KAMA Crossover<a class="headerlink" href="#module-strategies.kama_crossover_filtered" title="Link to this heading"></a></h3>
<section id="kama-crossover-strategy-with-multi-factor-filters">
<h4>KAMA Crossover Strategy with Multi-Factor Filters<a class="headerlink" href="#kama-crossover-strategy-with-multi-factor-filters" title="Link to this heading"></a></h4>
<p><strong>Type</strong>: Trend Following / Adaptive</p>
<p><strong>Summary</strong>: Uses Kaufman’s Adaptive Moving Average crossovers with comprehensive entry filters.</p>
<section id="entry-conditions-all-must-be-true">
<h5>Entry Conditions (ALL must be true):<a class="headerlink" href="#entry-conditions-all-must-be-true" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Fast KAMA(55) crosses above Slow KAMA(233)</p></li>
<li><p>Short Trend (Aroon 25): Bull or Sideways</p></li>
<li><p>Volatility (ATR 14): High or Med classification</p></li>
<li><p>DI_Bullish (14): +DI &gt; -DI</p></li>
<li><p>CCI (20): &gt; 0 (positive momentum)</p></li>
<li><p>Price &gt; EMA(20) (above short-term trend)</p></li>
</ol>
</section>
<section id="id5">
<h5>Exit Conditions:<a class="headerlink" href="#id5" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>Fast KAMA crosses below Slow KAMA (bearish crossunder)</p></li>
</ol>
</section>
<section id="risk-management">
<h5>Risk Management:<a class="headerlink" href="#risk-management" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>Stop Loss: 2 × ATR(14) fixed stop at entry</p></li>
</ul>
</section>
<section id="kama-parameters">
<h5>KAMA Parameters:<a class="headerlink" href="#kama-parameters" title="Link to this heading"></a></h5>
<p>KAMA adapts its smoothing based on market efficiency:
- High efficiency (trending): Faster response
- Low efficiency (choppy): Slower, smoother response</p>
</section>
<section id="id6">
<h5>Parameters:<a class="headerlink" href="#id6" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>len_fast (int): Fast KAMA length. Default: 55</p></li>
<li><p>len_slow (int): Slow KAMA length. Default: 233</p></li>
<li><p>fast_end (float): Fast smoothing constant. Default: 0.666</p></li>
<li><p>slow_end (float): Slow smoothing constant. Default: 0.0645</p></li>
<li><p>atr_period (int): ATR period for stop loss. Default: 14</p></li>
<li><p>atr_multiplier (float): ATR multiplier for stop. Default: 2.0</p></li>
<li><p>aroon_period (int): Aroon period for trend. Default: 25</p></li>
<li><p>cci_period (int): CCI period. Default: 20</p></li>
</ul>
</section>
<section id="id7">
<h5>Performance Notes:<a class="headerlink" href="#id7" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p>Multi-filter approach reduces false signals</p></li>
<li><p>Best on daily timeframe</p></li>
<li><p>Requires trending markets for optimal performance</p></li>
</ul>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.kama_crossover_filtered.</span></span><span class="sig-name descname"><span class="pre">KAMACrossoverFiltered</span></span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>KAMA Crossover Strategy with New Filters.</p>
<p>Entry Conditions (ALL must be true):
1. Fast KAMA crosses above Slow KAMA
2. Short Trend (Aroon 25): Bull or Sideways
3. Volatility (14): High or Med
4. DI_Bullish (14): True (+DI &gt; -DI)
5. CCI (20): &gt; 0
6. Price &gt; EMA(20)</p>
<p>Exit: Fast KAMA crosses below Slow KAMA</p>
<p>Stop Loss: 2 × ATR(14) fixed stop at entry</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.len_fast">
<span class="sig-name descname"><span class="pre">len_fast</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">55</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.len_fast" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.len_slow">
<span class="sig-name descname"><span class="pre">len_slow</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">233</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.len_slow" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.fast_end">
<span class="sig-name descname"><span class="pre">fast_end</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.666</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.fast_end" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.slow_end">
<span class="sig-name descname"><span class="pre">slow_end</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0645</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.slow_end" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.atr_multiplier">
<span class="sig-name descname"><span class="pre">atr_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2.0</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.atr_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.aroon_period">
<span class="sig-name descname"><span class="pre">aroon_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.aroon_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.volatility_period">
<span class="sig-name descname"><span class="pre">volatility_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.volatility_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.di_period">
<span class="sig-name descname"><span class="pre">di_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.di_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.cci_period">
<span class="sig-name descname"><span class="pre">cci_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.cci_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.ema_period">
<span class="sig-name descname"><span class="pre">ema_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.ema_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize (legacy method).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.on_entry" title="Link to this definition"></a></dt>
<dd><p>Configure entry stop loss.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.kama_crossover_filtered.KAMACrossoverFiltered.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/kama_crossover_filtered.html#KAMACrossoverFiltered.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.kama_crossover_filtered.KAMACrossoverFiltered.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-strategies.knoxville">
<span id="knoxville-divergence"></span><h3>Knoxville Divergence<a class="headerlink" href="#module-strategies.knoxville" title="Link to this heading"></a></h3>
<section id="knoxville-divergence-strategy-with-reversal-tabs">
<h4>Knoxville Divergence Strategy with Reversal Tabs<a class="headerlink" href="#knoxville-divergence-strategy-with-reversal-tabs" title="Link to this heading"></a></h4>
<p>A trend-following strategy combining:
1. <strong>Knoxville Divergence</strong>: RSI + Momentum divergence detection using fractals
2. <strong>Reversal Tabs</strong>: MACD mean reversion signals (Bob Rooker style)</p>
<p>Original TradingView strategy adapted for QuantLab backtesting engine.</p>
<p>Key Features:
- Entry: Bullish Knoxville divergence OR MACD reversal signal
- Exit: Bearish signals (KD or Sell Reversal Tab)
- SL: 5x ATR stop loss
- Filter: SMA 20 &lt; SMA 50 (uptrend filter)</p>
<p>Parameters (from TradingView script):
- Knox RSI: 21 period (Note: TV default was 17, user override to 21)
- Knox Momentum: 20 period
- Fractal lookback: 30 candles (user requirement: at least 30 candles back)
- MACD: 12/26/9
- Stochastic RSI: 70-period, 10K, 10D
- ATR: 14-period, 5x multiplier for stop loss
- SMA: 20-period and 50-period for trend filter</p>
<p>CRITICAL: All trading decisions use PREVIOUS bar data only.
This ensures no future leak and realistic trading simulation.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="strategies.knoxville.detect_fractals">
<span class="sig-prename descclassname"><span class="pre">strategies.knoxville.</span></span><span class="sig-name descname"><span class="pre">detect_fractals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">momentum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lookback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#detect_fractals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.detect_fractals" title="Link to this definition"></a></dt>
<dd><p>Detect fractal tops and bottoms in momentum.</p>
<p>A fractal top is when momentum[t-2] &gt; momentum[t] &lt; momentum[t+2]
A fractal bottom is when momentum[t-2] &lt; momentum[t] &gt; momentum[t+2]</p>
<p>Returns:
- fractal_tops: indices of fractal tops
- fractal_bottoms: indices of fractal bottoms</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>momentum</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span>)</p></li>
<li><p><strong>lookback</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">strategies.knoxville.</span></span><span class="sig-name descname"><span class="pre">KnoxvilleStrategy</span></span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#core.strategy.Strategy" title="core.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
<p>Knoxville Divergence Strategy with Reversal Tabs.</p>
<p>Combines two complementary signals:
1. Knoxville Divergence: Detects hidden divergences between price and momentum
2. Reversal Tabs: MACD + Stochastic mean reversion on oversold/overbought</p>
<p>NOTE ON INDICATORS:
- Indicators return NaN for insufficient data period
- Stochastic RSI requires 70-bar minimum
- Strategy checks for NaN before trading to avoid premature signals</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.knox_rsi_period">
<span class="sig-name descname"><span class="pre">knox_rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">21</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.knox_rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.knox_momentum_period">
<span class="sig-name descname"><span class="pre">knox_momentum_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.knox_momentum_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.knox_fractal_lookback">
<span class="sig-name descname"><span class="pre">knox_fractal_lookback</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.knox_fractal_lookback" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.knox_rsi_ob">
<span class="sig-name descname"><span class="pre">knox_rsi_ob</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70.0</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.knox_rsi_ob" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.knox_rsi_os">
<span class="sig-name descname"><span class="pre">knox_rsi_os</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30.0</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.knox_rsi_os" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.macd_fast">
<span class="sig-name descname"><span class="pre">macd_fast</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">12</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.macd_fast" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.macd_slow">
<span class="sig-name descname"><span class="pre">macd_slow</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">26</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.macd_slow" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.macd_signal">
<span class="sig-name descname"><span class="pre">macd_signal</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.macd_signal" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.stoch_rsi_period">
<span class="sig-name descname"><span class="pre">stoch_rsi_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.stoch_rsi_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.stoch_k_period">
<span class="sig-name descname"><span class="pre">stoch_k_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.stoch_k_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.stoch_d_period">
<span class="sig-name descname"><span class="pre">stoch_d_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.stoch_d_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.stoch_ob">
<span class="sig-name descname"><span class="pre">stoch_ob</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">70.0</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.stoch_ob" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.stoch_os">
<span class="sig-name descname"><span class="pre">stoch_os</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30.0</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.stoch_os" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.atr_period">
<span class="sig-name descname"><span class="pre">atr_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.atr_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.atr_multiplier">
<span class="sig-name descname"><span class="pre">atr_multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10.0</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.atr_multiplier" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.use_stop_loss">
<span class="sig-name descname"><span class="pre">use_stop_loss</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.use_stop_loss" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.sma_fast_period">
<span class="sig-name descname"><span class="pre">sma_fast_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.sma_fast_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.sma_slow_period">
<span class="sig-name descname"><span class="pre">sma_slow_period</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.sma_slow_period" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.prepare" title="Link to this definition"></a></dt>
<dd><p>Setup data and initialize indicators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.initialize" title="Link to this definition"></a></dt>
<dd><p>Initialize all indicators using Strategy.I() wrapper.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.on_entry">
<span class="sig-name descname"><span class="pre">on_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy.on_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.on_entry" title="Link to this definition"></a></dt>
<dd><p>Calculate ATR-based stop loss when entering a trade.</p>
<p>Stop loss is DISABLED by default (use_stop_loss = False).
Can be enabled by setting use_stop_loss = True.
Uses 5x ATR multiplier for stop loss.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.on_bar">
<span class="sig-name descname"><span class="pre">on_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy.on_bar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.on_bar" title="Link to this definition"></a></dt>
<dd><p>Execute trading logic on each bar.</p>
<p>Uses PREVIOUS bar data only to prevent future leak.</p>
<p>Entry: Bullish KD or Buy Reversal Tab
Exit: Bearish KD or Sell Reversal Tab</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timestamp</p></li>
<li><p><strong>row</strong> – Current bar data</p></li>
<li><p><strong>state</strong> – Trading state</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary with entry/exit signals</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="strategies.knoxville.KnoxvilleStrategy.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/strategies/knoxville.html#KnoxvilleStrategy.next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#strategies.knoxville.KnoxvilleStrategy.next" title="Link to this definition"></a></dt>
<dd><p>Legacy method - not used by QuantLab engine.</p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="core.html" class="btn btn-neutral float-left" title="Core Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="utils.html" class="btn btn-neutral float-right" title="Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, QuantLab Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>